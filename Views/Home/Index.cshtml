@{
    ViewBag.Title = "Kurumlar";
}
<div class="card text-white bg-secondary mb-3 w-100 mt-2">
    <div class="card-header"><h1>Kurumlar | Nazım ÖZTÜRK</h1></div>
    <div class="card-body">
        <h5 class="card-title">Nazım ÖZTÜRK</h5>
        <p class="card-text">Kurum arama sayfasıdır.</p>
    </div>
</div>


<script>
    $(document).ready( function() {
        //$('#AlmsData').hide();
        //$('#PerculusData').hide();
        //$('#CustomersData').hide();

        const products = [
            { ID: 1, Name: 'Alms' },
            { ID: 2, Name: 'Perculus' }
        ];

        const orgData = [
            { ID: 1, Name: 'Sakarya' },
            { ID: 2, Name: 'Karasu' }
        ];

        const Urunler = $('#Products').dxSelectBox({
            dataSource: products,
            showClearButton: true,
            displayExpr: 'Name',
            valueExpr: 'ID',
            placeholder: 'Ürün Arama',
            searchEnabled: true,
        }).dxSelectBox('instance');

        const Kurumlar = $('#Organization').dxSelectBox({
        dataSource: orgData,
        showClearButton: true,
        displayExpr: 'Name',
        valueExpr: 'ID',
        placeholder: 'Kurum Arama',
        searchEnabled: true,
        }).dxSelectBox('instance');

        $('#success-contained').dxButton({
            stylingMode: 'contained',
            text: 'Sync YAP',
            type: 'success',
            width: '98%',
            onClick() {
                DevExpress.ui.notify('Sync İşlemi Başarılı Bir Şekilde Sonuçlandı');
            }
        });


        // Datatable;

        $("#AlmsData").dxDataGrid({
            dataSource: {
                load: async function GetDataForDxDataGrid() {
                    var ListPromise = new Promise((Resolve) => {
                        $.ajax({
                            type: "POST",
                            url: "/WebService.asmx/Alms",
                            data: JSON.stringify({}),
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                            success: function (msg) { Resolve(JSON.parse(msg.d.data)); }
                        });
                    });
                    return ListPromise;
                }
            },
            paging: { pageSize: 25 },
            pager: {
                showPageSizeSelector: true,
                allowedPageSizes: [10, 25, 50, 100],
                showInfo: true
            },
            remoteOperations: false,
            rowAlternationEnabled: true, //Satırların Renklendirilmesini Sağlıyor
            searchPanel: {
                visible: true,
                highlightCaseSensitive: true,
                placeholder: 'Ara...',
            },
            groupPanel: { visible: true },
            grouping: {
                autoExpandAll: false, //Sayfa Açılışınca Gruplar Kapalı Şekilde Gelecek.
                contextMenuEnabled: true
            },
            showBorders: true,
            showRowLines: true,
            //Kolonların Yeniden Boyutlandırılabilir mi ?
            allowColumnReordering: true,
            allowColumnResizing: true,
            filterRow: { visible: true }, //Satırlara Filtre Eklenebilir mi ?
            /*Kolon Gizlenebilir mi ?*/
            columnChooser: {
                enabled: true,
                allowSearch: true
            },
            columnAutoWidth: false,
            selection: { mode: "multiple" },
            sorting: { mode: "multiple" },
            scrolling: { useNative: true },
            stateStoring: {
                enabled: true, //Kullanıcıya Özel Grid Dizayn Yapılıp Yapılamayacağının Bilgisidir.
                type: "custom",
                savingTimeout: 0
            },
            headerFilter: { visible: true },
            export: {
                enabled: true
            },

        columns: [
            {
                dataField: "Alms_OrganizationID",
                caption: "Organizasyon ID",
                dataType: "string"
            },
            {
                dataField: "Alms_OrganizationName",
                caption: "Kurum Adı",
                dataType: "string"
            },
            {
                dataField: "ALMS_Database",
                caption: "Data Base",
                dataType: "string"
            }
        ],
    }).dxDataGrid('instance');

     async function AlmsDatasi() {
        var AtamaPromise = new Promise((Resolve) => {
            $.ajax({
                type: "POST",
                url: "/WebService.asmx/Alms",
                data: JSON.stringify({}),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) { Resolve(JSON.parse(msg.d.data)); }
            });
        });

     return AtamaPromise;
    }
 });
</script>

<div class="container mt-4">
    <div class="row">
        <div class="col-5">
            <div id="Products"></div>
        </div>
        <div class="col-5">
            <div id="Organization"></div>
        </div>
        <div class="col-2">
            <button class="btn btn-success w-100" type="button" id="success-contained">SYNC YAP</button>
        </div>
    </div>
    <div class="row mt-4">
        <div class="demo-container col-12 my-1 border border-2 border-primary p-2 rounded-3"><div id="AlmsData"></div></div>
        <div class="demo-container col-12 my-1 border border-2 border-info p-2 rounded-3"><div id="PerculusData"></div>PerculusData</div>
        <div class="demo-container col-12 my-1 border border-2 border-success p-2 rounded-3"><div id="CustomersData"></div>CustomersData</div>
    </div>
</div>
